const fs = require('fs');
const b64 = 'J3VzZSBzdHJpY3QnOwpjb25zdCBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7CmNvbnN0IGRiID0gcmVxdWlyZSgnLi9kYicpOwoKY29uc3Qgc2xlZXAgPSBtcyA9PiBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgbXMpKTsKCmNvbnN0IFVTRVJfQUdFTlRTID0gWwogICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIyLjAuMC4wIFNhZmFyaS81MzcuMzYnLAogICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0OyBydjoxMjQuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xMjQuMCcsCiAgJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzE1XzcpIEFwcGxlV2ViS2l0LzYwNS4xLjE1IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi8xNy4zIFNhZmFyaS82MDUuMS4xNScsCl07CmNvbnN0IHJhbmRVQSA9ICgpID0+IFVTRVJfQUdFTlRTW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIFVTRVJfQUdFTlRTLmxlbmd0aCldOwoKY29uc3QgYmFzZUhlYWRlcnMgPSAoKSA9PiAoewogICdVc2VyLUFnZW50JzogcmFuZFVBKCksCiAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSwqLyo7cT0wLjgnLAogICdBY2NlcHQtTGFuZ3VhZ2UnOiAnZW4tVVMsZW47cT0wLjknLAogICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJywKICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywKfSk7Cgphc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhSZXRyeSh1cmwsIG9wdHMsIHJldHJpZXMsIGJhc2VEZWxheSkgewogIHJldHJpZXMgPSByZXRyaWVzIHx8IDM7CiAgYmFzZURlbGF5ID0gYmFzZURlbGF5IHx8IDIwMDA7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXRyaWVzOyBpKyspIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQodXJsLCBPYmplY3QuYXNzaWduKHsgaGVhZGVyczogYmFzZUhlYWRlcnMoKSwgdGltZW91dDogMTUwMDAgfSwgb3B0cyB8fCB7fSkpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIGNvbnN0IHN0YXR1cyA9IGVyci5yZXNwb25zZSAmJiBlcnIucmVzcG9uc2Uuc3RhdHVzOwogICAgICBpZiAoc3RhdHVzID09PSA0MDMgfHwgc3RhdHVzID09PSA0MDEpIHRocm93IGVycjsKICAgICAgaWYgKGkgPCByZXRyaWVzIC0gMSkgYXdhaXQgc2xlZXAoYmFzZURlbGF5ICogTWF0aC5wb3coMiwgaSkgKyBNYXRoLnJhbmRvbSgpICogMTAwMCk7CiAgICAgIGVsc2UgdGhyb3cgZXJyOwogICAgfQogIH0KfQoKZnVuY3Rpb24gaW5zZXJ0TGVhZChsZWFkKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHsKICAgIGRiLnJ1bigKICAgICAgJ0lOU0VSVCBPUiBJR05PUkUgSU5UTyBsZWFkcyAobmFtZSwgY29udGFjdCwgc291cmNlLCBtZXNzYWdlLCBidXNpbmVzcywgbG9jYXRpb24sIHRpdGxlLCB1cmwpIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPyknLAogICAgICBbbGVhZC5uYW1lLCBsZWFkLmNvbnRhY3QsIGxlYWQuc291cmNlLCBsZWFkLm1lc3NhZ2UgfHwgJycsIGxlYWQuYnVzaW5lc3MgfHwgJycsIGxlYWQubG9jYXRpb24gfHwgJycsIGxlYWQudGl0bGUgfHwgJycsIGxlYWQudXJsIHx8IGxlYWQuY29udGFjdF0sCiAgICAgIGZ1bmN0aW9uKGVycikgeyByZXNvbHZlKGVyciA/IDAgOiB0aGlzLmNoYW5nZXMpOyB9CiAgICApOwogIH0pOwp9Cgpjb25zdCBSRURESVRfQ09ORklHUyA9IFsKICB7IHN1YjogJ0NoYXJsb3R0ZScsICAgICAgIGtleXdvcmRzOiBbJ2N1c3RvbScsJ3NpbHZlcicsJ2dvbGQnLCdjYXN0JywnamV3ZWxyeScsJ21ldGFsJywnM2QgcHJpbnQnLCdyaW5nJywncGVuZGFudCcsJ3NjdWxwdHVyZScsJ3Ryb3BoeScsJ2Jyb256ZScsJ21ha2VyJ10gfSwKICB7IHN1YjogJ0NMVCcsICAgICAgICAgICAgIGtleXdvcmRzOiBbJ2N1c3RvbScsJ3NpbHZlcicsJ2dvbGQnLCdjYXN0JywnamV3ZWxyeScsJ21ldGFsJywncmluZycsJ2Jyb256ZSddIH0sCiAgeyBzdWI6ICdDb25jb3JkX05DJywgICAgICBrZXl3b3JkczogWydjdXN0b20nLCdqZXdlbHJ5JywnbWV0YWwnLCdjYXN0Jywnc2lsdmVyJywnZ29sZCddIH0sCiAgeyBzdWI6ICdMYWtlTm9ybWFuJywgICAgICBrZXl3b3JkczogWydjdXN0b20nLCdqZXdlbHJ5JywnbWV0YWwnLCdjYXN0Jywnc2lsdmVyJywnZ29sZCddIH0sCiAgeyBzdWI6ICdqZXdlbHJ5JywgICAgICAgICBrZXl3b3JkczogWydjdXN0b20nLCdjYXN0Jywnc2lsdmVyJywnZ29sZCcsJ3JpbmcnLCdwZW5kYW50JywnbG9zdCB3YXgnLCdpbnZlc3RtZW50IGNhc3QnLCczZCBwcmludCddIH0sCiAgeyBzdWI6ICdqZXdlbHJ5bWFraW5nJywgICBrZXl3b3JkczogWydjYXN0Jywnc2lsdmVyJywnZ29sZCcsJ2N1c3RvbScsJzNkIHByaW50Jywnd2F4JywnaW52ZXN0bWVudCcsJ2J1cm5vdXQnLCd2YWN1dW0nXSB9LAogIHsgc3ViOiAnbWV0YWx3b3JraW5nJywgICAga2V5d29yZHM6IFsnY2FzdCcsJ2N1c3RvbScsJ3NpbHZlcicsJ2dvbGQnLCdicm9uemUnLCdhbHVtaW51bScsJ3Bld3RlciddIH0sCiAgeyBzdWI6ICdzaWx2ZXJzbWl0aGluZycsICBrZXl3b3JkczogWydjYXN0JywnY3VzdG9tJywnbG9zdCB3YXgnLCdpbnZlc3RtZW50JywnM2QgcHJpbnQnXSB9LAogIHsgc3ViOiAnM0RwcmludGluZycsICAgICAga2V5d29yZHM6IFsnY2FzdCcsJ21ldGFsJywnc2lsdmVyJywnZ29sZCcsJ2Jyb256ZScsJ2xvc3QgcGxhJywnbG9zdCByZXNpbicsJ2J1cm5vdXQnLCdpbnZlc3RtZW50J10gfSwKICB7IHN1YjogJ3Jlc2lucHJpbnRpbmcnLCAgIGtleXdvcmRzOiBbJ2Nhc3QnLCdtZXRhbCcsJ3NpbHZlcicsJ2dvbGQnLCdidXJub3V0JywnaW52ZXN0bWVudCBjYXN0J10gfSwKICB7IHN1YjogJ1ByaW50ZWRNaW5pcycsICAgIGtleXdvcmRzOiBbJ2Nhc3QnLCdtZXRhbCcsJ3NpbHZlcicsJ2Jyb256ZScsJ3Bld3RlcicsJ2N1c3RvbSddIH0sCiAgeyBzdWI6ICdEbkQnLCAgICAgICAgICAgICBrZXl3b3JkczogWydjYXN0JywnbWV0YWwnLCdzaWx2ZXInLCdicm9uemUnLCdwZXd0ZXInLCdtaW5pJywnZmlndXJpbmUnLCdjdXN0b20nLCd0cm9waHknXSB9LAogIHsgc3ViOiAnRG5EbWluaWF0dXJlcycsICAga2V5d29yZHM6IFsnY2FzdCcsJ21ldGFsJywnc2lsdmVyJywnYnJvbnplJywncGV3dGVyJywnY3VzdG9tJ10gfSwKICB7IHN1YjogJ0RJWScsICAgICAgICAgICAgIGtleXdvcmRzOiBbJ2N1c3RvbSBwYXJ0JywnY2FzdCcsJ21ldGFsJywncmVwbGFjZW1lbnQnLCdzaWx2ZXInLCdicm9uemUnLCdicmFzcyddIH0sCiAgeyBzdWI6ICdIb21lSW1wcm92ZW1lbnQnLCBrZXl3b3JkczogWydjdXN0b20gcGFydCcsJ2Nhc3QnLCdtZXRhbCcsJ3JlcGxhY2VtZW50JywnYnJvbnplJywnYnJhc3MnLCdoYXJkd2FyZSddIH0sCiAgeyBzdWI6ICdob21lb3duZXJzJywgICAgICBrZXl3b3JkczogWydjdXN0b20nLCdtZXRhbCcsJ2Nhc3QnLCdyZXBsYWNlbWVudCBwYXJ0JywnYnJvbnplJywnYnJhc3MnXSB9LAogIHsgc3ViOiAnR2lmdHMnLCAgICAgICAgICAga2V5d29yZHM6IFsnY3VzdG9tJywnc2lsdmVyJywnZ29sZCcsJ2Nhc3QnLCdtZXRhbCcsJ3JpbmcnLCdwZW5kYW50JywndHJvcGh5JywnYXdhcmQnXSB9LAogIHsgc3ViOiAnRW50cmVwcmVuZXVyJywgICAga2V5d29yZHM6IFsnY3VzdG9tJywnY2FzdGluZycsJ3Byb3RvdHlwZScsJ21ldGFsJywnYnJvbnplJywnc2lsdmVyJywnc21hbGwgYmF0Y2gnLCdjb250cmFjdCddIH0sCiAgeyBzdWI6ICdzbWFsbGJ1c2luZXNzJywgICBrZXl3b3JkczogWydjdXN0b20nLCdjYXN0aW5nJywncHJvdG90eXBlJywnbWV0YWwnLCdiYWRnZScsJ2F3YXJkJywndHJvcGh5J10gfSwKICB7IHN1YjogJ0NyeXB0bycsICAgICAgICAgIGtleXdvcmRzOiBbJ3NpbHZlcicsJ2dvbGQnLCdjb2xkIHdhbGxldCcsJ2hhcmR3YXJlIHdhbGxldCcsJ3RhbmdlbScsJ2xlZGdlcicsJ3ByZWNpb3VzIG1ldGFsJ10gfSwKICB7IHN1YjogJ0JpdGNvaW4nLCAgICAgICAgIGtleXdvcmRzOiBbJ3NpbHZlcicsJ2dvbGQnLCdwaHlzaWNhbCcsJ2NvaW4nLCdjb2xkIHdhbGxldCcsJ3ByZWNpb3VzIG1ldGFsJywnY2FzdCddIH0sCiAgeyBzdWI6ICdXYXJoYW1tZXI0MGsnLCAgICBrZXl3b3JkczogWydjYXN0JywnbWV0YWwnLCdmaWd1cmluZScsJ21pbmknLCdwZXd0ZXInLCdjdXN0b20nXSB9LApdOwoKYXN5bmMgZnVuY3Rpb24gc2NyYXBlUmVkZGl0KGJ1c2luZXNzKSB7CiAgYnVzaW5lc3MgPSBidXNpbmVzcyB8fCAnZm9yZ2Vib3JuJzsKICBsZXQgdG90YWwgPSAwOwogIGZvciAobGV0IGkgPSAwOyBpIDwgUkVERElUX0NPTkZJR1MubGVuZ3RoOyBpKyspIHsKICAgIGNvbnN0IGNmZyA9IFJFRERJVF9DT05GSUdTW2ldOwogICAgdHJ5IHsKICAgICAgYXdhaXQgc2xlZXAoMTIwMCArIE1hdGgucmFuZG9tKCkgKiA4MDApOwogICAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9yLycgKyBjZmcuc3ViICsgJy9uZXcuanNvbj9saW1pdD01MCc7CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeSh1cmwsIHsgaGVhZGVyczogeyAnVXNlci1BZ2VudCc6ICdMZWFkQm90LzEuMCcsICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicgfSB9KTsKICAgICAgY29uc3QgcG9zdHMgPSAocmVzcC5kYXRhICYmIHJlc3AuZGF0YS5kYXRhICYmIHJlc3AuZGF0YS5kYXRhLmNoaWxkcmVuKSB8fCBbXTsKICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwb3N0cy5sZW5ndGg7IGorKykgewogICAgICAgIGNvbnN0IHAgPSBwb3N0c1tqXS5kYXRhOwogICAgICAgIGNvbnN0IHRleHQgPSAocC50aXRsZSArICcgJyArIChwLnNlbGZ0ZXh0IHx8ICcnKSkudG9Mb3dlckNhc2UoKTsKICAgICAgICBjb25zdCBtYXRjaGVkID0gY2ZnLmtleXdvcmRzLnNvbWUoZnVuY3Rpb24oaykgeyByZXR1cm4gdGV4dC5pbmRleE9mKGsudG9Mb3dlckNhc2UoKSkgIT09IC0xOyB9KTsKICAgICAgICBpZiAoIW1hdGNoZWQpIGNvbnRpbnVlOwogICAgICAgIGNvbnN0IG4gPSBhd2FpdCBpbnNlcnRMZWFkKHsKICAgICAgICAgIG5hbWU6IHAuYXV0aG9yLAogICAgICAgICAgY29udGFjdDogJ2h0dHBzOi8vcmVkZGl0LmNvbScgKyBwLnBlcm1hbGluaywKICAgICAgICAgIHVybDogJ2h0dHBzOi8vcmVkZGl0LmNvbScgKyBwLnBlcm1hbGluaywKICAgICAgICAgIHNvdXJjZTogJ1JlZGRpdCByLycgKyBjZmcuc3ViLAogICAgICAgICAgdGl0bGU6IHAudGl0bGUsCiAgICAgICAgICBtZXNzYWdlOiAocC5zZWxmdGV4dCB8fCBwLnRpdGxlKS5zdWJzdHJpbmcoMCwgNTAwKSwKICAgICAgICAgIGJ1c2luZXNzOiBidXNpbmVzcywKICAgICAgICAgIGxvY2F0aW9uOiAnJywKICAgICAgICB9KTsKICAgICAgICB0b3RhbCArPSBuOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgY29uc29sZS5lcnJvcignUmVkZGl0IHIvJyArIGNmZy5zdWIgKyAnIGVycjonLCAoZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5zdGF0dXMpIHx8IGVyci5tZXNzYWdlKTsKICAgIH0KICB9CiAgY29uc29sZS5sb2coJ1JlZGRpdDogJyArIHRvdGFsKTsKICByZXR1cm4gdG90YWw7Cn0KCmZ1bmN0aW9uIHBhcnNlWG1sVGFnKHhtbCwgdGFnKSB7CiAgY29uc3Qgb3BlbiA9ICc8JyArIHRhZyArICc+JzsKICBjb25zdCBjbG9zZSA9ICc8LycgKyB0YWcgKyAnPic7CiAgY29uc3QgY2RhdGFPcGVuID0gJzwnICsgdGFnICsgJz48IVtDREFUQVsnOwogIGNvbnN0IGNkYXRhQ2xvc2UgPSAnXV0+PC8nICsgdGFnICsgJz4nOwogIGlmICh4bWwuaW5kZXhPZihjZGF0YU9wZW4pICE9PSAtMSkgewogICAgY29uc3Qgc3RhcnQgPSB4bWwuaW5kZXhPZihjZGF0YU9wZW4pICsgY2RhdGFPcGVuLmxlbmd0aDsKICAgIGNvbnN0IGVuZCA9IHhtbC5pbmRleE9mKGNkYXRhQ2xvc2UsIHN0YXJ0KTsKICAgIHJldHVybiBlbmQgIT09IC0xID8geG1sLnN1YnN0cmluZyhzdGFydCwgZW5kKSA6ICcnOwogIH0KICBpZiAoeG1sLmluZGV4T2Yob3BlbikgIT09IC0xKSB7CiAgICBjb25zdCBzdGFydCA9IHhtbC5pbmRleE9mKG9wZW4pICsgb3Blbi5sZW5ndGg7CiAgICBjb25zdCBlbmQgPSB4bWwuaW5kZXhPZihjbG9zZSwgc3RhcnQpOwogICAgcmV0dXJuIGVuZCAhPT0gLTEgPyB4bWwuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpIDogJyc7CiAgfQogIHJldHVybiAnJzsKfQoKZnVuY3Rpb24gc3RyaXBIdG1sKHN0cikgewogIGxldCBvdXQgPSAnJzsKICBsZXQgaW5UYWcgPSBmYWxzZTsKICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewogICAgaWYgKHN0cltpXSA9PT0gJzwnKSB7IGluVGFnID0gdHJ1ZTsgY29udGludWU7IH0KICAgIGlmIChzdHJbaV0gPT09ICc+JykgeyBpblRhZyA9IGZhbHNlOyBjb250aW51ZTsgfQogICAgaWYgKCFpblRhZykgb3V0ICs9IHN0cltpXTsKICB9CiAgcmV0dXJuIG91dDsKfQoKY29uc3QgQ0xfU0VBUkNIRVMgPSBbCiAgeyB1cmw6ICdodHRwczovL2NoYXJsb3R0ZS5jcmFpZ3NsaXN0Lm9yZy9zZWFyY2gvYmFwP3F1ZXJ5PWN1c3RvbStqZXdlbHJ5JmZvcm1hdD1yc3MnLCBzb3VyY2U6ICdDcmFpZ3NsaXN0JyB9LAogIHsgdXJsOiAnaHR0cHM6Ly9jaGFybG90dGUuY3JhaWdzbGlzdC5vcmcvc2VhcmNoL2JhcD9xdWVyeT1jdXN0b20rcmluZyZmb3JtYXQ9cnNzJywgICBzb3VyY2U6ICdDcmFpZ3NsaXN0JyB9LAogIHsgdXJsOiAnaHR0cHM6Ly9jaGFybG90dGUuY3JhaWdzbGlzdC5vcmcvc2VhcmNoL2JhcD9xdWVyeT1tZXRhbCtjYXN0aW5nJmZvcm1hdD1yc3MnLCBzb3VyY2U6ICdDcmFpZ3NsaXN0JyB9LAogIHsgdXJsOiAnaHR0cHM6Ly9jaGFybG90dGUuY3JhaWdzbGlzdC5vcmcvc2VhcmNoL2JhcD9xdWVyeT1jdXN0b20rdHJvcGh5JmZvcm1hdD1yc3MnLCBzb3VyY2U6ICdDcmFpZ3NsaXN0JyB9LAogIHsgdXJsOiAnaHR0cHM6Ly9jaGFybG90dGUuY3JhaWdzbGlzdC5vcmcvc2VhcmNoL2JhcD9xdWVyeT1zaWx2ZXJzbWl0aCZmb3JtYXQ9cnNzJywgICBzb3VyY2U6ICdDcmFpZ3NsaXN0JyB9LAogIHsgdXJsOiAnaHR0cHM6Ly9jaGFybG90dGUuY3JhaWdzbGlzdC5vcmcvc2VhcmNoL2JhcD9xdWVyeT1icm9uemUrc2N1bHB0dXJlJmZvcm1hdD1yc3MnLCBzb3VyY2U6ICdDcmFpZ3NsaXN0JyB9LAogIHsgdXJsOiAnaHR0cHM6Ly9jaGFybG90dGUuY3JhaWdzbGlzdC5vcmcvc2VhcmNoL2xiZz9xdWVyeT1qZXdlbHJ5K2N1c3RvbSZmb3JtYXQ9cnNzJywgIHNvdXJjZTogJ0NyYWlnc2xpc3QnIH0sCiAgeyB1cmw6ICdodHRwczovL2NoYXJsb3R0ZS5jcmFpZ3NsaXN0Lm9yZy9zZWFyY2gvbGJnP3F1ZXJ5PW1ldGFsd29yayZmb3JtYXQ9cnNzJywgICAgICAgIHNvdXJjZTogJ0NyYWlnc2xpc3QnIH0sCl07Cgphc3luYyBmdW5jdGlvbiBzY3JhcGVDcmFpZ3NsaXN0KGJ1c2luZXNzKSB7CiAgYnVzaW5lc3MgPSBidXNpbmVzcyB8fCAnZm9yZ2Vib3JuJzsKICBsZXQgdG90YWwgPSAwOwogIGZvciAobGV0IGkgPSAwOyBpIDwgQ0xfU0VBUkNIRVMubGVuZ3RoOyBpKyspIHsKICAgIGNvbnN0IHMgPSBDTF9TRUFSQ0hFU1tpXTsKICAgIHRyeSB7CiAgICAgIGF3YWl0IHNsZWVwKDIwMDAgKyBNYXRoLnJhbmRvbSgpICogMTUwMCk7CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeShzLnVybCwgeyByZXNwb25zZVR5cGU6ICd0ZXh0JyB9KTsKICAgICAgY29uc3QgeG1sID0gcmVzcC5kYXRhIHx8ICcnOwogICAgICBjb25zdCBwYXJ0cyA9IHhtbC5zcGxpdCgnPGl0ZW0+Jyk7CiAgICAgIGZvciAobGV0IHBpID0gMTsgcGkgPCBwYXJ0cy5sZW5ndGg7IHBpKyspIHsKICAgICAgICBjb25zdCBjbG9zZUlkeCA9IHBhcnRzW3BpXS5pbmRleE9mKCc8JyArICcvaXRlbT4nKTsKICAgICAgICBjb25zdCBpdGVtID0gY2xvc2VJZHggIT09IC0xID8gcGFydHNbcGldLnN1YnN0cmluZygwLCBjbG9zZUlkeCkgOiBwYXJ0c1twaV07CiAgICAgICAgY29uc3QgdGl0bGUgPSBwYXJzZVhtbFRhZyhpdGVtLCAndGl0bGUnKTsKICAgICAgICBjb25zdCBsaW5rICA9IHBhcnNlWG1sVGFnKGl0ZW0sICdsaW5rJykudHJpbSgpOwogICAgICAgIGNvbnN0IGRlc2MgID0gc3RyaXBIdG1sKHBhcnNlWG1sVGFnKGl0ZW0sICdkZXNjcmlwdGlvbicpKS5zdWJzdHJpbmcoMCwgNTAwKTsKICAgICAgICBpZiAoIWxpbmsgfHwgIXRpdGxlKSBjb250aW51ZTsKICAgICAgICBjb25zdCBuID0gYXdhaXQgaW5zZXJ0TGVhZCh7CiAgICAgICAgICBuYW1lOiAnQ3JhaWdzbGlzdCBQb3N0JywgY29udGFjdDogbGluaywgdXJsOiBsaW5rLAogICAgICAgICAgc291cmNlOiBzLnNvdXJjZSwgdGl0bGU6IHRpdGxlLCBtZXNzYWdlOiBkZXNjLAogICAgICAgICAgYnVzaW5lc3M6IGJ1c2luZXNzLCBsb2NhdGlvbjogJ0NoYXJsb3R0ZSwgTkMnLAogICAgICAgIH0pOwogICAgICAgIHRvdGFsICs9IG47CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBjb25zb2xlLmVycm9yKCdDcmFpZ3NsaXN0IGVycjonLCAoZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5zdGF0dXMpIHx8IGVyci5tZXNzYWdlKTsKICAgIH0KICB9CiAgY29uc29sZS5sb2coJ0NyYWlnc2xpc3Q6ICcgKyB0b3RhbCk7CiAgcmV0dXJuIHRvdGFsOwp9Cgphc3luYyBmdW5jdGlvbiBkdWNrZHVja2dvU2VhcmNoKHF1ZXJ5LCBtYXhSZXN1bHRzKSB7CiAgbWF4UmVzdWx0cyA9IG1heFJlc3VsdHMgfHwgMTA7CiAgYXdhaXQgc2xlZXAoMzAwMCArIE1hdGgucmFuZG9tKCkgKiAyMDAwKTsKICB0cnkgewogICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoV2l0aFJldHJ5KCdodHRwczovL2h0bWwuZHVja2R1Y2tnby5jb20vaHRtbC8nLCB7CiAgICAgIGhlYWRlcnM6IE9iamVjdC5hc3NpZ24oYmFzZUhlYWRlcnMoKSwgeyAnUmVmZXJlcic6ICdodHRwczovL2R1Y2tkdWNrZ28uY29tLycgfSksCiAgICAgIHBhcmFtczogeyBxOiBxdWVyeSwga2w6ICd1cy1lbicgfSwKICAgICAgcmVzcG9uc2VUeXBlOiAndGV4dCcsCiAgICB9KTsKICAgIGNvbnN0IGh0bWwgPSByZXNwLmRhdGEgfHwgJyc7CiAgICBjb25zdCByZXN1bHRzID0gW107CiAgICBjb25zdCBhbmNob3IgPSAnY2xhc3M9InJlc3VsdF9fYSInOwogICAgbGV0IHBvcyA9IDA7CiAgICB3aGlsZSAocmVzdWx0cy5sZW5ndGggPCBtYXhSZXN1bHRzKSB7CiAgICAgIGNvbnN0IGlkeCA9IGh0bWwuaW5kZXhPZihhbmNob3IsIHBvcyk7CiAgICAgIGlmIChpZHggPT09IC0xKSBicmVhazsKICAgICAgY29uc3QgaHJlZlN0YXJ0ID0gaHRtbC5pbmRleE9mKCdocmVmPSInLCBpZHgpICsgNjsKICAgICAgY29uc3QgaHJlZkVuZCA9IGh0bWwuaW5kZXhPZignIicsIGhyZWZTdGFydCk7CiAgICAgIGNvbnN0IHRhZ0VuZCA9IGh0bWwuaW5kZXhPZignPicsIGlkeCk7CiAgICAgIGNvbnN0IGNsb3NlVGFnID0gaHRtbC5pbmRleE9mKCc8JyArICcvYT4nLCB0YWdFbmQpOwogICAgICBjb25zdCBocmVmID0gaHRtbC5zdWJzdHJpbmcoaHJlZlN0YXJ0LCBocmVmRW5kKTsKICAgICAgY29uc3QgcmF3VGl0bGUgPSBodG1sLnN1YnN0cmluZyh0YWdFbmQgKyAxLCBjbG9zZVRhZyk7CiAgICAgIGNvbnN0IHRpdGxlID0gc3RyaXBIdG1sKHJhd1RpdGxlKS50cmltKCk7CiAgICAgIGNvbnN0IGNsZWFuSHJlZiA9IGhyZWYuaW5kZXhPZignL2wvP3VkZGc9JykgPT09IDAKICAgICAgICA/IGRlY29kZVVSSUNvbXBvbmVudChocmVmLnJlcGxhY2UoJy9sLz91ZGRnPScsICcnKS5zcGxpdCgnJicpWzBdKQogICAgICAgIDogaHJlZjsKICAgICAgaWYgKGNsZWFuSHJlZi5pbmRleE9mKCdodHRwJykgPT09IDAgJiYgdGl0bGUpIHsKICAgICAgICByZXN1bHRzLnB1c2goeyB1cmw6IGNsZWFuSHJlZiwgdGl0bGU6IHRpdGxlIH0pOwogICAgICB9CiAgICAgIHBvcyA9IGNsb3NlVGFnICsgMTsKICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH0gY2F0Y2ggKGVycikgewogICAgY29uc29sZS5lcnJvcignRHVja0R1Y2tHbyBlcnI6JywgKGVyci5yZXNwb25zZSAmJiBlcnIucmVzcG9uc2Uuc3RhdHVzKSB8fCBlcnIubWVzc2FnZSk7CiAgICByZXR1cm4gW107CiAgfQp9Cgpjb25zdCBEREdfUVVFUklFUyA9IFsKICB7IHE6ICdzaXRlOnJlZGRpdC5jb20gQ2hhcmxvdHRlIE5DIGxvb2tpbmcgZm9yIGN1c3RvbSBqZXdlbHJ5IGNhc3Rpbmcgc2lsdmVyJywgc291cmNlOiAnU2VhcmNoL0RERycgfSwKICB7IHE6ICdzaXRlOnJlZGRpdC5jb20gY3VzdG9tIGNhc3RpbmcgamV3ZWxyeSBzaWx2ZXIgZ29sZCAzZCBwcmludCAyMDI1IDIwMjYnLCBzb3VyY2U6ICdTZWFyY2gvRERHJyB9LAogIHsgcTogJ3NpdGU6cmVkZGl0LmNvbSBsb3N0IHdheCBjYXN0aW5nIHNlcnZpY2UgY29tbWlzc2lvbiAyMDI1IDIwMjYnLCBzb3VyY2U6ICdTZWFyY2gvRERHJyB9LAogIHsgcTogJ3NpdGU6cmVkZGl0LmNvbSBtZXRhbCBjYXN0IG1pbmlhdHVyZXMgY3VzdG9tIERuRCAyMDI1IDIwMjYnLCBzb3VyY2U6ICdTZWFyY2gvRERHJyB9LAogIHsgcTogJ3NpdGU6cmVkZGl0LmNvbSBwcmVjaW91cyBtZXRhbCBjb2xkIHdhbGxldCBjYXN0IHNpbHZlciBnb2xkIDIwMjUnLCBzb3VyY2U6ICdTZWFyY2gvRERHJyB9LAogIHsgcTogJ3NpdGU6ZmFjZWJvb2suY29tIENoYXJsb3R0ZSBjdXN0b20gamV3ZWxyeSBjYXN0aW5nIHNpbHZlcnNtaXRoJywgc291cmNlOiAnRmFjZWJvb2svU2VhcmNoJyB9LAogIHsgcTogJ3NpdGU6bmV4dGRvb3IuY29tIGNoYXJsb3R0ZSBjdXN0b20gamV3ZWxyeSBzaWx2ZXJzbWl0aCBjYXN0aW5nJywgc291cmNlOiAnTmV4dGRvb3IvU2VhcmNoJyB9LAogIHsgcTogJ3NpdGU6eWVscC5jb20gY2hhcmxvdHRlIG5jIGpld2VscnkgY2FzdGluZyBjdXN0b20gc2lsdmVyJywgc291cmNlOiAnWWVscC9TZWFyY2gnIH0sCiAgeyBxOiAnc2l0ZTpiYmIub3JnIGNoYXJsb3R0ZSBuYyBqZXdlbHJ5IGNhc3Rpbmcgc2lsdmVyc21pdGgnLCBzb3VyY2U6ICdCQkInIH0sCiAgeyBxOiAnc2l0ZTpiYXJrLmNvbSBjaGFybG90dGUgbmMgamV3ZWxyeSBjYXN0aW5nIHNpbHZlcnNtaXRoJywgc291cmNlOiAnQmFyaycgfSwKICB7IHE6ICdzaXRlOnRodW1idGFjay5jb20gY2hhcmxvdHRlIG5jIHNpbHZlcnNtaXRoIGN1c3RvbSBqZXdlbHJ5Jywgc291cmNlOiAnVGh1bWJ0YWNrJyB9LAogIHsgcTogJ2NoYXJsb3R0ZSBuYyBsb29raW5nIGZvciBzaWx2ZXJzbWl0aCBjdXN0b20gamV3ZWxyeSBtZXRhbCBjYXN0aW5nIDIwMjUgMjAyNicsIHNvdXJjZTogJ1NlYXJjaC9EREcnIH0sCiAgeyBxOiAnY2hhcmxvdHRlIG5jIGNhbiBhbnlvbmUgcmVjb21tZW5kIGpld2VsZXIgc2lsdmVyc21pdGggY2FzdGluZycsIHNvdXJjZTogJ1NlYXJjaC9EREcnIH0sCiAgeyBxOiAnY2hhcmxvdHRlIGN1c3RvbSB0cm9waHkgYXdhcmQgc2lsdmVyIGJyb256ZSBtYWRlIHRvIG9yZGVyJywgc291cmNlOiAnU2VhcmNoL0RERycgfSwKICB7IHE6ICd0YWJsZXRvcCBib2FyZGdhbWUgbWV0YWwgbWluaWF0dXJlIHBld3RlciBjdXN0b20gY29tbWlzc2lvbiAyMDI1IDIwMjYnLCBzb3VyY2U6ICdTZWFyY2gvRERHJyB9LApdOwoKYXN5bmMgZnVuY3Rpb24gc2NyYXBlU2VhcmNoKGJ1c2luZXNzKSB7CiAgYnVzaW5lc3MgPSBidXNpbmVzcyB8fCAnZm9yZ2Vib3JuJzsKICBsZXQgdG90YWwgPSAwOwogIGZvciAobGV0IGkgPSAwOyBpIDwgRERHX1FVRVJJRVMubGVuZ3RoOyBpKyspIHsKICAgIGNvbnN0IGNmZyA9IERER19RVUVSSUVTW2ldOwogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGR1Y2tkdWNrZ29TZWFyY2goY2ZnLnEsIDgpOwogICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlc3VsdHMubGVuZ3RoOyBqKyspIHsKICAgICAgICBjb25zdCByID0gcmVzdWx0c1tqXTsKICAgICAgICBpZiAoci51cmwuaW5kZXhPZignLmdvdicpICE9PSAtMSB8fCByLnVybC5pbmRleE9mKCd3aWtpcGVkaWEnKSAhPT0gLTEpIGNvbnRpbnVlOwogICAgICAgIGNvbnN0IG4gPSBhd2FpdCBpbnNlcnRMZWFkKHsKICAgICAgICAgIG5hbWU6ICdXZWIgTGVhZCcsIGNvbnRhY3Q6IHIudXJsLCB1cmw6IHIudXJsLAogICAgICAgICAgc291cmNlOiBjZmcuc291cmNlLCB0aXRsZTogci50aXRsZSwKICAgICAgICAgIG1lc3NhZ2U6ICdGb3VuZCB2aWE6ICcgKyBjZmcucS5zdWJzdHJpbmcoMCwgODApLAogICAgICAgICAgYnVzaW5lc3M6IGJ1c2luZXNzLCBsb2NhdGlvbjogJ0NoYXJsb3R0ZSwgTkMnLAogICAgICAgIH0pOwogICAgICAgIHRvdGFsICs9IG47CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBjb25zb2xlLmVycm9yKCdTZWFyY2ggZXJyOicsIGVyci5tZXNzYWdlKTsKICAgIH0KICB9CiAgY29uc29sZS5sb2coJ1NlYXJjaC9EREc6ICcgKyB0b3RhbCk7CiAgcmV0dXJuIHRvdGFsOwp9Cgphc3luYyBmdW5jdGlvbiBzY3JhcGVBbGwoYnVzaW5lc3MpIHsKICBidXNpbmVzcyA9IGJ1c2luZXNzIHx8ICdmb3JnZWJvcm4nOwogIGNvbnNvbGUubG9nKCdTdGFydGluZyBmdWxsIHNjcmFwZS4uLicpOwogIGNvbnN0IHJlZGRpdCAgICAgPSBhd2FpdCBzY3JhcGVSZWRkaXQoYnVzaW5lc3MpOwogIGNvbnN0IGNyYWlnc2xpc3QgPSBhd2FpdCBzY3JhcGVDcmFpZ3NsaXN0KGJ1c2luZXNzKTsKICBjb25zdCBzZWFyY2ggICAgID0gYXdhaXQgc2NyYXBlU2VhcmNoKGJ1c2luZXNzKTsKICBjb25zdCByZXN1bHQgPSB7IHJlZGRpdDogcmVkZGl0LCBjcmFpZ3NsaXN0OiBjcmFpZ3NsaXN0LCBmYWNlYm9vazogMCwgbmV4dGRvb3I6IDAsIGdvb2dsZW1hcHM6IDAsIHllbHA6IDAsIG90aGVyOiBzZWFyY2ggfTsKICBjb25zdCBuZXdUb3RhbCA9IE9iamVjdC52YWx1ZXMocmVzdWx0KS5yZWR1Y2UoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYSArIGI7IH0sIDApOwogIGNvbnNvbGUubG9nKCdTY3JhcGUgZG9uZSEgTmV3IGxlYWRzOiAnICsgbmV3VG90YWwpOwogIHJldHVybiByZXN1bHQ7Cn0KCm1vZHVsZS5leHBvcnRzID0geyBzY3JhcGVBbGw6IHNjcmFwZUFsbCwgc2NyYXBlUmVkZGl0OiBzY3JhcGVSZWRkaXQsIHNjcmFwZUNyYWlnc2xpc3Q6IHNjcmFwZUNyYWlnc2xpc3QsIHNjcmFwZVNlYXJjaDogc2NyYXBlU2VhcmNoIH07Cg==';
const code = Buffer.from(b64, 'base64').toString('utf8');
fs.writeFileSync('C:/Users/Owner/Desktop/gmail-calendar-assistant/scraper.js', code, 'utf8');
console.log('scraper.js written successfully!');
try {
  require('child_process').execSync('node --check C:/Users/Owner/Desktop/gmail-calendar-assistant/scraper.js', {stdio:'inherit'});
  console.log('Syntax check PASSED - no errors!');
} catch(e) {
  console.log('Syntax check FAILED:', e.message);
}